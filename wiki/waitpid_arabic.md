<!--
Meta Description: # الدالة waitpid في Perl: إدارة العمليات الفرعية ## الملخص تعتبر الدالة `waitpid` في Perl أداة قوية لإدارة العمليات الفرعية، حيث تتيح للمبرمجين انتظار...
Meta Keywords: pid, العملية, الدالة, waitpid, فرعية
-->

# الدالة waitpid في Perl: إدارة العمليات الفرعية

## الملخص
تعتبر الدالة `waitpid` في Perl أداة قوية لإدارة العمليات الفرعية، حيث تتيح للمبرمجين انتظار انتهاء عملية معينة والحصول على حالة خروجها.

## الوثائق
تستخدم الدالة `waitpid` في Perl لانتظار انتهاء عملية فرعية محددة. تأخذ هذه الدالة معرف العملية (PID) كوسيط وتعيد حالة خروج العملية. يمكن استخدامها في حالات متعددة، مثل إدارة عمليات النظام أو تنفيذ مهام متعددة بشكل متزامن.

### الاستخدام
```perl
$pid = waitpid($pid, $options);
```

- **$pid**: معرف العملية التي نريد الانتظار عليها. إذا كان $pid هو -1، فإن `waitpid` ستنتظر أي عملية فرعية.
- **$options**: يمكن أن يكون إما 0 أو WNOHANG. إذا كان 0، تنتظر الدالة حتى تنتهي العملية. إذا كان WNOHANG، ستعود الدالة على الفور إذا لم تكن العملية قد انتهت بعد.

### التفاصيل
- `waitpid` تعيد حالة الخروج للعملية المحددة، مما يتيح لك معرفة ما إذا كانت العملية قد انتهت بنجاح أو حدث خطأ.
- تعيد الدالة -1 إذا لم يكن هناك عمليات فرعية متاحة، مما يعني أن العملية المطلوبة لم تُعثر عليها.
- يمكن استخدام الدالة مع العمليات التي تم إنشاؤها باستخدام `fork`.

## الأمثلة
### مثال 1: انتظار عملية فرعية
```perl
my $pid = fork();
if ($pid == 0) {
    # عملية فرعية
    exec("sleep 5");
} else {
    # العملية الرئيسية
    my $result = waitpid($pid, 0);
    print "العملية الفرعية {$pid} انتهت بحالة الخروج: $result\n";
}
```

### مثال 2: استخدام WNOHANG
```perl
my $pid = fork();
if ($pid == 0) {
    # عملية فرعية
    exec("sleep 10");
} else {
    # العملية الرئيسية
    while (1) {
        my $result = waitpid($pid, WNOHANG);
        if ($result == 0) {
            print "العملية الفرعية ما زالت تعمل.\n";
            sleep(1);
        } elsif ($result == $pid) {
            print "العملية الفرعية {$pid} انتهت.\n";
            last;
        } else {
            print "لا توجد عمليات فرعية.\n";
            last;
        }
    }
}
```

## الشرح
قد يواجه المبرمجون بعض العقبات عند استخدام `waitpid`، مثل:
- **المعرفات غير الصحيحة**: إذا تم تمرير معرف غير صحيح، ستعيد الدالة -1.
- **العمليات غير الموجودة**: في حالة عدم وجود عملية فرعية متاحة، ستعيد الدالة -1.
- **استخدام WNOHANG**: يجب الانتباه عند استخدام هذا الخيار لأنه قد يؤدي إلى حلقة لا نهائية إذا لم يتم التحقق من حالة العملية بشكل صحيح.

## ملخص بجملة واحدة
تعتبر الدالة `waitpid` في Perl أداة فعالة لإدارة انتظار العمليات الفرعية والحصول على حالة خروجها.