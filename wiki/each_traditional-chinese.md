<!--
Meta Description: # Perl 中的 each 函數：使用與示例 ## 概述 `each` 是 Perl 中的一個內建函數，用於遍歷哈希（hash）或數組（array）的元素。它返回當前鍵值對並將游標移到下一個元素，便於在循環中逐一處理數據。 ## 文檔 ### 目的 `each` 主要用於遍歷哈希結構，提供鍵和值的...
Meta Keywords: each, perl, key, value, hash
-->

# Perl 中的 each 函數：使用與示例

## 概述
`each` 是 Perl 中的一個內建函數，用於遍歷哈希（hash）或數組（array）的元素。它返回當前鍵值對並將游標移到下一個元素，便於在循環中逐一處理數據。

## 文檔
### 目的
`each` 主要用於遍歷哈希結構，提供鍵和值的配對，並在每次調用時自動更新游標位置。

### 用法
`each` 函數的基本語法如下：
```perl
while (my ($key, $value) = each %hash) {
    # 這裡可以使用 $key 和 $value
}
```
在這裡，`%hash` 是要遍歷的哈希變量。

### 詳細說明
- 當 `each` 被應用於哈希時，返回一個包含鍵值對的列表。如果哈希中沒有更多的元素，它會返回一個空列表，這時可以用來結束循環。
- `each` 函數的作用是「取出當前元素並移動到下一個元素」，這使得它在遍歷時更為高效，因為不需要顯式地跟踪鍵的索引。
- `each` 只能用於哈希，對於數組，則需要使用 `each` 的其他版本或使用其他迭代器（如 `foreach`）。

## 示例
以下是 `each` 函數的基本使用示例：

```perl
my %fruits = (
    'apple' => 3,
    'banana' => 2,
    'cherry' => 5,
);

while (my ($key, $value) = each %fruits) {
    print "$key: $value\n";
}
```
這段代碼將輸出：
```
apple: 3
banana: 2
cherry: 5
```

## 解釋
- **常見錯誤**：在使用 `each` 時，若哈希被修改（例如添加或刪除元素），可能會導致錯誤的結果或循環提前結束。因此，建議在遍歷哈希時不要修改其內容。
- **重置游標**：如果需要重複遍歷某個哈希，則應在第一次遍歷結束後重置游標，通過調用 `keys` 或 `values` 函數來獲取新的列表。
- **與 `keys` 和 `values` 的比較**：`each` 不同於 `keys` 和 `values`，後者僅返回鍵或值的列表，而 `each` 提供了鍵與其對應值的配對。

## 總結
`each` 是 Perl 中一個非常有用的函數，能夠方便地遍歷哈希結構，適合在需要鍵值對處理的場合中使用。