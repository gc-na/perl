<!--
Meta Description: # Perlにおけるstat関数の完全ガイド ## 概要 Perlの`stat`関数は、ファイルのメタデータを取得するための強力なツールです。この関数を使用することで、ファイルのサイズ、更新日時、アクセス権限などの情報を簡単に取得できます。 ## ドキュメンテーション ### 目的 `stat`関数...
Meta Keywords: stat, file_info, stats, perl, filename
-->

# Perlにおけるstat関数の完全ガイド

## 概要
Perlの`stat`関数は、ファイルのメタデータを取得するための強力なツールです。この関数を使用することで、ファイルのサイズ、更新日時、アクセス権限などの情報を簡単に取得できます。

## ドキュメンテーション
### 目的
`stat`関数は、指定されたファイルまたはファイルハンドルの状態情報を取得し、リスト形式で返します。この情報には、ファイルの種類、サイズ、所有者、グループ、パーミッション、最終更新日時などが含まれます。

### 使用法
`stat`の基本的な使い方は次の通りです：

```perl
my @file_info = stat("ファイル名");
```

または、ファイルハンドルを使用して次のように書くこともできます：

```perl
open my $fh, '<', 'ファイル名' or die $!;
my @file_info = stat($fh);
```

### 詳細
- `stat`は、返されるリストの各要素に特定の意味があります。
  - `$file_info[0]`: inode番号
  - `$file_info[1]`: ファイルタイプとモード
  - `$file_info[2]`: 所有者のユーザーID
  - `$file_info[3]`: グループのグループID
  - `$file_info[4]`: サイズ（バイト数）
  - `$file_info[5]`: 最終アクセス時刻
  - `$file_info[6]`: 最終変更時刻
  - `$file_info[7]`: 最終メタデータ変更時刻
  - `$file_info[8]`: ハードリンクの数
  - `$file_info[9]`: デバイス番号

これらの情報を利用して、ファイルの特性を詳細に把握することができます。

## 例
以下に`stat`関数の基本的な使用例を示します。

### 例1: ファイルのサイズを取得する
```perl
my $filename = 'example.txt';
my @stats = stat($filename);

if (defined $stats[4]) {
    print "ファイルのサイズ: $stats[4] バイト\n";
} else {
    print "ファイルが存在しません。\n";
}
```

### 例2: 最終更新日時を表示する
```perl
my $filename = 'example.txt';
my @stats = stat($filename);

if (defined $stats[9]) {
    my $mtime = localtime($stats[9]);
    print "最終更新日時: $mtime\n";
} else {
    print "ファイルが存在しません。\n";
}
```

## 説明
`stat`関数を使用する際の一般的な落とし穴や注意点には以下のものがあります：

1. **ファイルの存在確認**: `stat`は、指定されたファイルが存在しない場合、`undef`を返します。したがって、結果をチェックすることが重要です。
2. **ファイルハンドルの使用**: ファイルハンドルを使用する場合、必ずそのハンドルがオープンされていることを確認してください。
3. **プラットフォームの違い**: `stat`が返す情報は、プラットフォームによって異なる場合があります。特に、特定のファイルシステム機能に依存する情報（例えば、デバイス番号など）は注意が必要です。

## 一文要約
Perlの`stat`関数は、ファイルのメタデータを取得するための便利なツールであり、ファイルの特性を簡単に調べることができます。